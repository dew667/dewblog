---
title: 进程和线程
---

### 1\. 什么是进程和线程

-   进程是程序的一次执行过程，是系统运行程序的基本单位。在Java中，执行main函数即是启动了一个JVM进程。
    
-   线程是进程中更小的执行单位，一个进程可以产生多个线程。进程是资源分配的最小单位，而线程CPU执行时的最小单位。从JVM角度看，线程可以共享进程中的堆和元空间等，而每个线程拥有自己独立的虚拟机栈和本地方法栈以及程序计数器。由于多个线程可以共享进程的一些资源，所以各个线程之间切换更加轻量，要比进程负担更小。
     <!--more-->

### 2\. 请简要描述线程与进程的关系，区别及优缺点？

-   从JVM角度说说进程和线程之间的关系  
    ![pic1](https://s1.ax1x.com/2020/07/17/UyDCY6.jpg)  
    从上图可以看出：一个进程可以有多个线程，多个线程共享进程的堆和方法区（JDK1.8之后的元空间）资源，但每个线程有自己的程序计数器、虚拟机栈和本地方法栈。
    

**总结**：线程是进程划分成的更小的运行单位。线程和进程的最大不同在于基本上各进程相互独立，而线程则不一定，因为同一进程中的线程极有可能会相互影响。线程开销小，但不利于资源的管理和保护；进程则相反。

-   **扩展**：为什么程序计数器、虚拟机栈和本地方法栈是线程私有的呢？为什么堆和方法区是线程共享的呢？  
    1.程序计数器私有是为了线程切换后能够定位到正确的执行位置。  
    2.虚拟机栈和本地方法栈私有是为了保证线程中的局部变量不被别的线程访问到。  
    3.堆和方法区：堆是用来存放创建的对象的内存区域，方法区用来存储已被加载的类信息、常量、静态变量、即时编译器编译后的代码等数据。这部分数据需要各个线程共享。