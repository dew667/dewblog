---
title: HashMap的底层实现
---

-   HashMap底层是数组加链表组合起来使用的。当向HashMap中put一个键值对时，会计算出key的hashCode，然后通过扰动函数对hashCode值进行处理，以达到尽可能散列的目的，从而得到当前元素在数组中存储的位置。如果在该位置遇到已经存在的元素，则判断hash值以及Key是否相同，如果相同则覆盖之，不相同则采用“拉链法”解决冲突。
    
-   所谓扰动函数是指对元素key的hashcode进行扰动处理，达到减少在数组中碰撞的目的。
    
-   所谓拉链法是指HashMap的数组为链表数组，每一个数组位置上都是一个链表，可以存放一系列hash值发生碰撞的元素。
    
-   在JDK1.8之后，底层数据结构采用的是链表数组加红黑树。当数组位置上的链表长度超过8时转换为红黑树，以减少查询时间。
    
-   下面是JDK1.8之后HashMap的数据结构示意图：  
    ![pic1](https://s1.ax1x.com/2020/07/07/UESA5n.jpg)